<div class="text-center" ng-show="!auth.seniorStaff">
	<h3><strong>Nah.</strong></h3>

	<p>It would seem that you aren't on senior staff, so you can't manage the fishbowl.</p>
</div>

<div class="panel panel-default" ng-show="auth.seniorStaff">
	<div class="panel-heading">
		<h3 class="panel-title">Fishbowl Control Panel</h3>
	</div>

	<div class="panel-body">
		<button class="btn btn-default" ng-click="archiveFishbowl()" ng-disabled="apps.length == 0">Reset</button>
		<button class="btn btn-default" ng-click="rateFishbowlApps(apps)" ng-disabled="apps.length == 0">Calculate Rank</button>
		<button class="btn btn-default" ng-click="getFishbowlResults(apps)" ng-disabled="apps.length == 0">Print Results</button>
	</div>

	<div class="panel-body" ng-show="bowls.length > 0">
		<div class="row">
			<div class="col-sm-2" ng-repeat="b in bowls">
				<table class="table table-condensed">
					<thead>
						<th>Bowl {{$index + 1}}</th>
					</thead>

					<tr ng-repeat="e in b">
						<td>{{e.preferred_name}}</td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<table class="table">
		<thead>
			<th>Name</th>
			<th>Points</th>
			<th>Rank</th>
		</thead>

		<tbody>
			<!-- inline calculation of rank -->
			<tr ng-repeat="a in apps | orderBy:'-points'" ng-init="previousRank = ($index === 0) ? 0 : previousRank; 
				rank = ($index > 0 && a.points === apps[$index - 1].points) ? previousRank : $index + 1; 
				previousRank = rank;">
				<td>
					<a href="" ng-click="review(apps, a.username); $event.preventDefault();">{{a.preferred_name}}</a>
				</td>
				<td>{{a.points}}</td>
				<td>{{rank}}</td>
			</tr>			
		</tbody>
	</table>
</div>
