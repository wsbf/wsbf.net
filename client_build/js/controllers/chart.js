"use strict";var chartModule=angular.module("app.chart",["app.database"]);chartModule.controller("AlbumChartCtrl",["$scope","db",function(t,e){var a=864e5,r=7*a;t.today=Date.now(),t.general_genres=e.getDefs("general_genres"),t.count=30,t.albums=[],t.getChart=function(a,r){e.Charts.getTopAlbums(a,r,t.general_genreID).then(function(e){t.albums=e})},t.getPrevWeek=function(){t.date1-=r,t.date2-=r,t.getChart(t.date1,t.date2)},t.hasNextWeek=function(){return t.date2+r<=t.today},t.getNextWeek=function(){t.date1+=r,t.date2+=r,t.getChart(t.date1,t.date2)},t.getCurrWeek=function(){t.date1=t.today-r-a,t.date2=t.today-a,t.getChart(t.date1,t.date2)},t.getCurrWeek()}]),chartModule.controller("TrackChartCtrl",["$scope","db",function(t,e){var a=864e5,r=7*a;t.today=Date.now(),t.tracks=[];var n=function(a,r){e.Charts.getTopTracks(a,r).then(function(e){t.tracks=e})},o=function(){t.date1=t.today-r-a,t.date2=t.today-a,n(t.date1,t.date2)};o()}]),chartModule.controller("ChartWidgetCtrl",["$scope","db",function(t,e){var a=864e5,r=7*a,n=Date.now(),o=10;t.albums=[];var u=function(a,r){e.Charts.getTopAlbums(a,r).then(function(t){return t=t.slice(0,o),e.getAlbumArt(t,64)}).then(function(e){t.albums=e})},c=function(){var t=n-r-a,e=n-a;u(t,e)};c()}]);