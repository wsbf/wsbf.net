"use strict";var fishbowlModule=angular.module("wizbif.fishbowl",["wizbif.alert","wizbif.database"]);fishbowlModule.controller("FishbowlAppCtrl",["$scope","$location","db","alert",function(t,o,e,i){t.info={missed:!0},t.app={},t.submit=function(t){e.Fishbowl.submitApp(t).then(function(){o.url("/"),i.success("Fishbowl app submitted.")},function(t){i.error(t.data||t.statusText)})},e.Fishbowl.getInfo().then(function(o){t.info=o,t.info.missed=o.deadline<Date.now()})}]),fishbowlModule.controller("FishbowlLogCtrl",["$scope","$uibModal","alert","db",function(t,o,e,i){t.fishbowl_log_types=i.getDefs("fishbowl_log_types"),t.fishbowl_log=[];var l=function(){i.Fishbowl.getLog().then(function(o){t.fishbowl_log=o})};t.addItem=function(){o.open({templateUrl:"views/fishbowl_log_item.html",controller:"FishbowlLogItemCtrl"}).result.then(l)},t.deleteItem=function(t){i.Fishbowl.deleteLogItem(t).then(function(){e.success("Fishbowl item deleted."),l()},function(t){e.error(t.data||t.statusText)})},l()}]),fishbowlModule.controller("FishbowlLogItemCtrl",["$scope","db","alert",function(t,o,e){t.fishbowl_log_types=o.getDefs("fishbowl_log_types"),t.item={},t.submit=function(i){o.Fishbowl.submitLog(i).then(function(){e.success("Fishbowl item submitted."),t.$close()},function(t){e.error(t.data||t.statusText)})}}]);