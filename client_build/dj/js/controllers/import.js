"use strict";var importModule=angular.module("wizbif.import",["ui.bootstrap","wizbif.alert","wizbif.database"]);importModule.controller("ImportCtrl",["$scope","$rootScope","$uibModal","db",function(t,e,r,o){t.carts=[],t.albums=[];var n=function(){o.Import.getDirectory().then(function(e){t.carts=e.carts,t.albums=e.albums})};t.openCart=function(t){r.open({templateUrl:"views/import_cart.html",controller:"ImportCartCtrl",scope:angular.extend(e.$new(),{filename:t})}).result.then(n)},t.openAlbum=function(t){r.open({templateUrl:"views/import_album.html",controller:"ImportAlbumCtrl",scope:angular.extend(e.$new(),{artist_name:t.artist_name,album_name:t.album_name}),size:"lg"}).result.then(n)},n()}]),importModule.controller("ImportAlbumCtrl",["$scope","db","alert",function(t,e,r){t.general_genres=e.getDefs("general_genres"),t.album={},t.save=function(o){e.Import.importAlbum(o).then(function(){r.success("Album successfully imported."),t.$close()},function(t){r.error(t.data||t.statusText)})},e.Import.getAlbum(t.artist_name,t.album_name).then(function(e){t.album=e})}]),importModule.controller("ImportCartCtrl",["$scope","db","alert",function(t,e,r){t.cart_types=e.getDefs("cart_type"),t.cart={},t.save=function(o){e.Import.importCart(o).then(function(){r.success("Cart successfully imported."),t.$close()},function(t){r.error(t.data||t.statusText)})},e.Import.getCart(t.filename).then(function(e){t.cart=e})}]);