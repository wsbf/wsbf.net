"use strict";var playlistsModule=angular.module("wizbif.playlists",["ui.router","wizbif.alert","wizbif.database"]);playlistsModule.controller("PlaylistsCtrl",["$scope","$state","alert","db",function(t,a,l,e){t.playlists=[],t.deletePlaylist=function(t){confirm('Delete playlist "'+t.name+'"?')&&e.Playlist["delete"](t.playlistID).then(function(){a.reload(),l.success("Playlist deleted.")},function(t){l.error(t.data||t.statusText)})},e.Playlist.getPlaylists().then(function(a){t.playlists=a})}]),playlistsModule.controller("PlaylistEditCtrl",["$scope","$state","alert","db",function(t,a,l,e){t.playlist=a.params.playlistID?e.Playlist.get(a.params.playlistID):{tracks:[]},t.newTrack={disc_num:1},t.getAlbum=function(a){e.Playlist.getAlbum(a).then(function(a){t.newTrack.albumID=a.albumID,t.newTrack.rotation=a.rotation,t.newTrack.artist_name=a.artist_name,t.newTrack.album_name=a.album_name,t.newTrack.label=a.label})},t.getTrack=function(a,l,i){e.Playlist.getTrack(a,l,i).then(function(a){t.newTrack.track_name=a.track_name,t.newTrack.airabilityID=a.airabilityID})},t.addTrack=function(a,l){l.rotation=l.rotation||"O",a.unshift(l),t.newTrack={disc_num:1}},t.save=function(t){e.Playlist.save(t).then(function(){a.go("playlists"),l.success("Playlist saved.")},function(t){l.error(t.data||t.statusText)})}}]);