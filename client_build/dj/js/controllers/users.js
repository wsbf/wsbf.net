"use strict";var usersModule=angular.module("wizbif.users",["wizbif.alert","wizbif.database"]);usersModule.controller("UsersCtrl",["$scope","db",function(e,t){e.teams=t.getDefs("teams"),e.users=[],t.Users.getUsers(!1).then(function(t){e.users=t})}]),usersModule.controller("UsersAdminCtrl",["$scope","$rootScope","$uibModal","db",function(e,t,s,r){e.statuses=r.getDefs("status"),e.teams=r.getDefs("teams"),e.users=[],e.statusID="0";var n=function(){r.Users.getUsers(!0).then(function(t){e.users=t})};e.editUser=function(e){s.open({templateUrl:"views/users_admin_edit.html",controller:"UsersAdminEditCtrl",scope:angular.extend(t.$new(),{user:angular.copy(e)})}).result.then(n)},n()}]),usersModule.controller("UsersAdminEditCtrl",["$scope","db","alert",function(e,t,s){e.statuses=t.getDefs("status"),e.teams=t.getDefs("teams"),e.save=function(r){t.Users.saveUser(r).then(function(){e.$close(),s.success("User successfully saved.")},function(e){s.error(e.data||e.statusText)})}}]),usersModule.controller("UsersReviewsCtrl",["$scope","db",function(e,t){e.currMonth=new Date((new Date).getUTCFullYear(),(new Date).getUTCMonth()),e.users=[],e.getChart=function(s){var r=angular.copy(s);r.setUTCMonth(r.getUTCMonth()+1),t.Users.getAlbumReviewChart(s.getTime(),r.getTime()).then(function(t){e.users=t})},e.getPrevMonth=function(){e.date1.setUTCMonth(e.date1.getUTCMonth()-1),e.getChart(e.date1)},e.hasNextMonth=function(){return e.date1<e.currMonth},e.getNextMonth=function(){e.date1.setUTCMonth(e.date1.getUTCMonth()+1),e.getChart(e.date1)},e.getCurrMonth=function(){e.date1=angular.copy(e.currMonth),e.getChart(e.date1)},e.getCurrMonth()}]);